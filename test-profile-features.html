<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>个人信息管理功能测试</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; margin: 20px; }
        .test-section { margin-bottom: 30px; padding: 20px; border: 1px solid #ddd; border-radius: 8px; }
        .test-section h2 { color: #333; margin-top: 0; }
        .api-endpoint { background: #f4f4f4; padding: 10px; border-radius: 4px; margin: 10px 0; }
        .success { color: #28a745; }
        .error { color: #dc3545; }
        .info { color: #17a2b8; }
        ul { margin: 10px 0; }
        li { margin: 5px 0; }
    </style>
</head>
<body>
    <h1>个人信息管理功能测试指南</h1>
    
    <div class="test-section">
        <h2>✅ 功能完善总结</h2>
        <p class="success">已成功完善了客户和管理员的个人信息管理功能：</p>
        <ul>
            <li><strong>扩展了可编辑字段：</strong>真实姓名、性别、年龄、邮箱、电话</li>
            <li><strong>添加了密码修改功能：</strong>包含当前密码验证和新密码确认</li>
            <li><strong>为管理员创建了专门的个人信息页面</strong></li>
            <li><strong>增强了数据验证和用户体验</strong></li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🎯 客户个人信息管理功能</h2>
        <h3>访问路径：</h3>
        <div class="api-endpoint">前端：/customer/profile</div>
        
        <h3>功能特性：</h3>
        <ul>
            <li><strong>基本信息编辑：</strong>
                <ul>
                    <li>用户名（只读，不可修改）</li>
                    <li>真实姓名（可编辑）</li>
                    <li>性别选择（可编辑）</li>
                    <li>年龄（可编辑，1-150范围）</li>
                    <li>邮箱（可编辑，格式验证）</li>
                    <li>电话号码（可编辑）</li>
                </ul>
            </li>
            <li><strong>密码修改：</strong>
                <ul>
                    <li>当前密码验证</li>
                    <li>新密码（最少6位）</li>
                    <li>确认新密码（一致性检查）</li>
                </ul>
            </li>
            <li><strong>账户信息显示：</strong>
                <ul>
                    <li>账户余额</li>
                    <li>用户类型</li>
                    <li>注册时间</li>
                </ul>
            </li>
            <li><strong>账户充值功能</strong></li>
            <li><strong>借阅统计信息</strong></li>
        </ul>
    </div>

    <div class="test-section">
        <h2>👑 管理员个人信息管理功能</h2>
        <h3>访问路径：</h3>
        <div class="api-endpoint">前端：/admin/profile</div>
        
        <h3>功能特性：</h3>
        <ul>
            <li><strong>与客户相同的基本信息编辑功能</strong></li>
            <li><strong>密码修改功能</strong></li>
            <li><strong>管理员账户信息展示</strong></li>
            <li><strong>管理员权限说明：</strong>
                <ul>
                    <li>用户管理</li>
                    <li>图书管理</li>
                    <li>借阅管理</li>
                    <li>收费管理</li>
                    <li>数据统计</li>
                    <li>数据导入</li>
                </ul>
            </li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🔧 后端API接口</h2>
        
        <h3>客户/管理员共用接口：</h3>
        <div class="api-endpoint">
            <strong>GET /api/customer/profile</strong><br>
            <em>获取个人信息</em>
        </div>
        <div class="api-endpoint">
            <strong>PUT /api/customer/profile</strong><br>
            <em>更新个人信息</em><br>
            支持字段：realName, gender, age, email, phone
        </div>
        <div class="api-endpoint">
            <strong>POST /api/customer/change-password</strong><br>
            <em>修改密码</em><br>
            参数：oldPassword, newPassword (form-urlencoded)
        </div>
        
        <h3>客户专用接口：</h3>
        <div class="api-endpoint">
            <strong>POST /api/customer/recharge</strong><br>
            <em>账户充值</em><br>
            参数：amount
        </div>
        <div class="api-endpoint">
            <strong>GET /api/customer/statistics</strong><br>
            <em>获取借阅统计</em>
        </div>
    </div>

    <div class="test-section">
        <h2>🧪 测试流程</h2>
        
        <h3>1. 启动系统</h3>
        <ol>
            <li>启动后端服务：<code>mvn spring-boot:run</code></li>
            <li>启动前端服务：<code>npm run dev</code></li>
        </ol>
        
        <h3>2. 客户功能测试</h3>
        <ol>
            <li>以客户身份登录系统</li>
            <li>进入"个人信息"页面</li>
            <li>测试基本信息编辑：
                <ul>
                    <li>修改真实姓名</li>
                    <li>选择性别</li>
                    <li>输入年龄</li>
                    <li>更新邮箱和电话</li>
                    <li>点击"更新信息"保存</li>
                </ul>
            </li>
            <li>测试密码修改：
                <ul>
                    <li>输入当前密码</li>
                    <li>输入新密码（至少6位）</li>
                    <li>确认新密码</li>
                    <li>点击"修改密码"</li>
                </ul>
            </li>
            <li>测试账户充值功能</li>
            <li>查看借阅统计信息</li>
        </ol>
        
        <h3>3. 管理员功能测试</h3>
        <ol>
            <li>以管理员身份登录系统</li>
            <li>在左侧菜单中找到"个人信息"选项</li>
            <li>进入管理员个人信息页面</li>
            <li>测试与客户相同的信息编辑和密码修改功能</li>
            <li>查看管理员权限说明卡片</li>
        </ol>
    </div>

    <div class="test-section">
        <h2>⚠️ 注意事项</h2>
        <ul>
            <li class="error"><strong>密码修改安全：</strong>需要验证当前密码才能修改</li>
            <li class="info"><strong>数据验证：</strong>
                <ul>
                    <li>邮箱格式验证</li>
                    <li>年龄范围验证（1-150）</li>
                    <li>密码长度验证（最少6位）</li>
                    <li>新密码一致性验证</li>
                </ul>
            </li>
            <li class="info"><strong>用户名限制：</strong>用户名不能修改，保证账户唯一性</li>
            <li class="success"><strong>数据同步：</strong>信息更新后会同步到本地存储和全局状态</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>🔄 与之前功能的对比</h2>
        
        <h3>之前的限制：</h3>
        <ul class="error">
            <li>客户只能修改邮箱和电话</li>
            <li>没有密码修改功能</li>
            <li>管理员没有专门的个人信息页面</li>
            <li>缺少真实姓名、性别、年龄等基本信息字段</li>
        </ul>
        
        <h3>现在的改进：</h3>
        <ul class="success">
            <li>✅ 可编辑更多个人信息字段</li>
            <li>✅ 完整的密码修改功能</li>
            <li>✅ 管理员专用的个人信息页面</li>
            <li>✅ 更好的用户体验和数据验证</li>
            <li>✅ 一致的界面设计和交互逻辑</li>
        </ul>
    </div>

    <div class="test-section">
        <h2>📝 功能验证清单</h2>
        <h3>必须验证的功能点：</h3>
        <ul>
            <li>☐ 客户个人信息编辑（包含所有字段）</li>
            <li>☐ 客户密码修改（包含验证逻辑）</li>
            <li>☐ 管理员个人信息编辑</li>
            <li>☐ 管理员密码修改</li>
            <li>☐ 信息更新后的数据持久化</li>
            <li>☐ 表单验证和错误提示</li>
            <li>☐ 界面响应式设计</li>
            <li>☐ 菜单导航正确显示</li>
        </ul>
    </div>

</body>
</html> 